<main class="container">
    <%= link_to sanitize("&larr; Back to homepage"), root_path %>
    <div class="header">
        <h1>Visits</h1>
    </div>

    <div class="physician__visit-body">
        <div class="visit visit--header">
            <div class="visit__name">Parent and Child Names</div>
            <div class="visit__created">Created</div>
            <div class="visit__visited">Visited</div>
            <div class="visit__physician">Physician</div>
            <div class="visit__actions"></div>
        </div>

        <% @visits.ordered.each do |visit| %>
            <%= turbo_frame_tag dom_id(visit, "index") do %>
                <div class="visit">
                    <div class="visit__name">
                        <%= visit.parent_child_names %>
                        <div class="visit__symptoms">
                            <%= visit.symptoms %>
                        </div>
                    </div>
                    <div class="visit__created">
                        <%= visit.created_at %>
                    </div>
                    <div class="visit__visited">
                        <%= visit.visited_at || 'Waiting' %>
                    </div>
                    <div class="visit__physician">
                        <%= visit.physician&.name %>
                    </div>
                    <div class="visit__actions">
                        <% if not visit.visited %>
                            <%= link_to "Assign",
                                        [:assign, visit],
                                        class: "btn btn--secondary" %>
                        <% end %>
                    </div>
                </div>
            <% end %>
        <% end %>
    </div>
</main>

<%= turbo_frame_tag "waiting-visits-total" do %>
  <%= render "visits/total" %>
<% end %>

